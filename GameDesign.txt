■ スマホに移植しようという奇特な人へ
居ないとは思うけど。
このゲームは縦横比に縛りは無いので、縦画面ゲームで作って欲しい。
操作は仮想十字キーやタップ場所による入力でなく、フリックで方向指定、指を離す瞬間に入力（スネークの方向変更）でお願いしたい。

■ スネーク
自機はアイテムを食べると成長する。体の長さが１増える。
敵が自機にぶつかって死んでも、自機は成長する。
最初のうちはアイテムが主食。ゲームが進むとアイテムはだんだん出現しなくなる。これは敵を殺すことを狙ってもらうため。
自機の成長に制限はない。
自機が成長して4の倍数になるごとに、ステージが成長する。
ステージが１成長するたび、敵が１匹発生する。

■ アイテム
アイテムは3個で固定
アイテムは食われると死ぬ。死ぬと決められた時間後に復活する。
復活するまでの時間は、死んだ回数に比例する。死ねば死ぬほど復活が遅くなる。

■ ステージ（マップ）
右端と左端、上端と下端はつながってループする。
いきなり境界をまたがって登場すると衝突事故が発生するので、端の一列は上下、左右、両方に表示するミラー行とする。
ステージの拡大は、縦方向に１行増えることを基準とする。横方向は、2列増えることが多いが１列のこともある。

■ 画面
テキスト画面をモチーフとしているので、画面要素はキャラクター（文字）を単位としている。キャラクターは仮想的に32x32ドット。
ステージの拡大により、縦ｘ横のキャラクター数は変わる。横方向は偶数にも奇数にもなることに注意。センター配置するにも基準がぶれる。

■ 操作
How To Playに書いていないもの
PageUpでコリジョンマップ表示 - 衝突ロジックのデバッグ確認用
Shiftキー2回でポーズ中にロゴのオーバーレイ表示 - メディア掲載画面キャプチャ用
5回連続でstage10以下で死ぬとオートパイロット機能がオープンされる。利用可能になると同時に自動セットされている。（OPTIONで解除可能）

■ ランキング
アーケードゲームのような、初期値で入っているデフォルト仮ランキングは存在しない。
ゲーム全体で一つのランキングではなく、スピード別ｘオートパイロット有り無し別で、設定ごとのランキングとして扱う。
他のゲームで、EASY / NORMAL / HARDが別のランキングになっているようなもの。

■ セーブデータ
実行ファイルと同じフォルダにセーブデータを書き込もうとしても、実行ファイルにはそのフォルダへの書き込み権限がない可能性がある。
セーブデータはユーザー/Document/AppDataの下が良い。
セーブデータファイルが壊れていないかチェックは必要。
ヘッダ部分が壊れていればセーブデータは全く使われないし、その後に上書きされて過去のセーブデータファイルは失われる。
ランキングデータは読める分だけ読むので、エラーがあればそれ以降は読み込みを中止するだけ。
エラー発生前に読み込んだデータはそのまま生かす。
データファイルの末尾や途中が破損しても、それより前の部分はそのまま生かした方が良いから。


■ コーディングの反省点
オブジェクト基底クラスがない。
アイテムとスネークの共通部分を基底クラスにするべき。
オブジェクト管理クラスがない。無いとオブジェクト同士の相互参照がやりづらい。
仕方ないのでコリジョンマップのマップオブジェクトを拡張してオブジェクト参照を持たせたが、そのせいでオブジェクト番号体系がわかりにくい。

オブジェクト（スネーク）とシーン（ゲームのメインループ）のどちらにロジックを持たせるのか、方針がぶれている。
オブジェクト指向脳でいえば美しいのはすべてオブジェクト側で自己判断することだが、シーン側で処理する方がコーディングは簡単になる。余計なやり取りが減るから。
もっと多彩・属性が多い・変化するオブジェクトを扱うならすべてオブジェクト側で処理しないと、メインループが肥大化しすぎるか。

コリジョンマップは、ステージが拡大するたびに、コリジョンマップ自体も毎回拡大している。
拡大するとオブジェクトの再配置が発生するし、拡大アニメーション中の処理の妥当性も含めて、そのあたりが客観的に非常に分かりにくいしバグの巣窟にもなる。
最初から巨大なマップを持ち、その利用範囲だけを徐々に拡大する方がシンプルな実装だと思うが、限界値がないので巨大なマップでもいつかは拡大処理が必要になる。

上下左右の連結は、位置関係の処理全般に影響してきてコードが複雑化する。考慮漏れバグの原因。
とはいえ固定画面のシンプルなゲームだし、上下左右無限スクロールゲームに比べれば単純だ。問題ということではない。
なにより無限スクロールは大好物なので今後も採用していきたい。

Input入力クラスは押しっぱなしで自動連射入力になる設計だが、このゲームでは意味がなかった。
十字キー押しっぱなしでキャラクターが移動するような使い方であれば便利だったが。
シーンの変わり目で悪さをするからウェイトを仕込んだりしているので、普通に押す→離すで1回となる判定にした方が良い。
